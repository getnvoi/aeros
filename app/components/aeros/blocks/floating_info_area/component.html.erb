<div data-controller="<%= controller_name %>" class="fixed bottom-6 right-6 z-50 flex flex-col items-end">
  <%# Panel (above button) %>
  <div
    data-<%= controller_name %>-target="panel"
    class="<%= style(:panel) %> <%= width %> mb-3 scale-0 opacity-0"
  >
    <% if header? %>
      <div class="flex items-center justify-between px-4 py-3 border-b border-card-border">
        <div class="font-semibold text-sm"><%= header %></div>
        <button
          type="button"
          data-action="click-><%= controller_name %>#close"
          class="text-muted-foreground hover:text-foreground transition-colors"
        >
          <%= lucide_icon("x", class: "w-4 h-4") %>
        </button>
      </div>
    <% end %>
    <div class="max-h-96 overflow-y-auto">
      <%= content %>
    </div>
  </div>

  <%# Toggle button %>
  <% if trigger? %>
    <div data-action="click-><%= controller_name %>#toggle">
      <%= trigger %>
    </div>
  <% else %>
    <button
      type="button"
      data-action="click-><%= controller_name %>#toggle"
      data-<%= controller_name %>-target="button"
      class="<%= style(:toggle) %>"
    >
      <span data-<%= controller_name %>-target="iconOpen">
        <%= lucide_icon(icon, class: "w-5 h-5") %>
      </span>
      <span data-<%= controller_name %>-target="iconClose" class="hidden">
        <%= lucide_icon("x", class: "w-5 h-5") %>
      </span>
    </button>
  <% end %>
</div>
